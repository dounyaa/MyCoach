{% extends 'base.html.twig' %}

{% block title %}
	Hello ProgrammeController!
{% endblock %}

{% block body %}
	<!-- Blog Section Begin -->
	<section class="blog-section spad">
		<div class="container mt-5">
			<div class="row mt-5">
				<div class="col-lg-12">
					<div class="team-title">
						<div class="section-title">
							<span>Nos Programmes</span>
							<h2>
								Coacher vous avec des experts
							</h2>
						</div>
                        <div class="section-filter">
							<form method="get">
								<div class="row">
									<div class="dropdown col-lg-7">
										<select class="primary-btn btn-normal appoinment-btn dropdown-toggle"
											type="button"
											data-bs-toggle="dropdown"
											aria-expanded="false"
											id="filter-select"
											name="filter">
											<li>
												<option class="dropdown-item" value="">
													prix
												</option>
											</li>
											<li>
												<option class="dropdown-item" value="ASC" {{ selectfilter == "ASC" ? "selected" : "" }}>
													Prix bas à élevé
												</option>
											</li>
											<li>
												<option class="dropdown-item" value="DESC" {{ selectfilter == "DESC" ? "selected" : "" }}>
													Prix élevé à bas
												</option>
											</li>
										</select>
									</div>
									<div class="to-search search-switch">
										<button class="primary-btn btn-normal appoinment-btn" type="submit" href="">
											<i class="fa fa-search"></i>
										</button>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-8 p-0">
					{% if (programmes|length) == 0 %}
						<p>
							Nous sommes navré, y a aucun programme pour le moment !
						</p>
					{% endif %}
					
					{% for programme in programmes %}
						<div class="blog-item">
							<div class="bi-pic">
								{% if programme.image == null %}
									<img src="/images/programme_defaut.jpeg" alt="" />
								{% else %}
									<img src="/images/programme/{{ programme.image }}" alt="" />
								{% endif %}
							</div>
							<div class="bi-text">
								<h5>
								{% if isMesProgrammes %}
									<a href="{{
										path(
											'app_programme_detail',
											{
												id: programme.id
											}
										)
										}}">
										{{ programme.nom }}
									</a>
								{% else %}
									<a role="link" aria-disabled="true">
										{{ programme.nom }}
									</a>
								{% endif %}
								</h5>
								<ul>
									<li>by {{ programme.user.nom }} {{ programme.user.prenom }} </li>
									<li>{{ programme.categorie }}</li>
									<li>Price : {{ programme.prix }} €</li>
								</ul>
								<p>
									{{ programme.description }}
								</p>
								{% if isMesProgrammes %}
									<a class="btn primary-btn btn-normal appoinment-btn mx-1"
										href="{{ path('app_edit_programme', {'id' : programme.id }) }}"
										role="button">
										Modifier
									</a>
									<form method="post" action="{{ path('app_delete_programme', {'id': programme.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
										<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ programme.id) }}">
										<button class="btn primary-btn btn-normal appoinment-btn mx-1">Delete</button>
									</form>
								{% else %}
									<form method="post" action="{{ path('app_programme_reserver', {'id': programme.id}) }}" onsubmit="return confirm('Êtes-vous sûr de vouloir acheter ce programme ?');">
										<input type="hidden" name="acheter" value="{{ programme.id }}">
										<button class="primary-btn btn-normal appoinment-btn" type="submit">acheter</button>
									</form>
								{% endif %}
							</div>
						</div>
					{% endfor %}
				</div>
				<div class="col-lg-4 col-md-8 p-0">
					<div class="sidebar-option">
                        {% if not isMesProgrammes %}
						<div class="so-categories">
							<h5 class="title">
								Categories
							</h5>
							<ul>
								{% for categorie, nbProgramme in categories %}
									<li>
										<a href="{{
											path(
												'app_programme',
												{
													categorie: categorie
												}
											)
											}}">
											{{ categorie }} <span>{{ nbProgramme }}</span>
										</a>
									</li>
								{% endfor %}

								<li><a href="{{ path('app_programme') }}">Voir Tous</a></li>
							</ul>
						</div>
						{% endif %}
						<div>
							{% if isMesProgrammes %}
								<a class="primary-btn btn-normal appoinment-btn"
									href="{{ path('app_add_programme') }}"
									role="button">
									Ajouter un programme
								</a>
							{% endif %}
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- Blog Section End -->
{% endblock %}
